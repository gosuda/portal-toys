<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>커뮤니티 게시판 - 목록</title>
  <link rel="stylesheet" href="/static/style.css">
</head>
<body>
  <div id="top" class="dcwrap list_wrap">
    <header class="header-bar">
      <div>
        <div class="header-bar-title">커뮤니티 게시판</div>
        <div class="header-bar-sub">자유롭게 글과 이야기를 나누는 공간입니다.</div>
      </div>
      <div class="header-bar-actions">
        <button type="button" class="btn-primary" onclick="location.href='/write'">글쓰기</button>
      </div>
    </header>

    <main id="container" class="listwrap">
      <section class="left_content">
        <div class="list_array_option clear">
          <div class="array_tab left_box">
            <button type="button" class="on">전체글</button>
            <button type="button" disabled>개념글</button>
            <button type="button" disabled>공지</button>
          </div>
        </div>

        <div class="gall_listwrap list">
          <table class="gall_list">
            <caption>게시글 리스트</caption>
            <colgroup>
              <col style="width:4%">
              <col>
              <col style="width:10%">
              <col style="width:10%">
              <col style="width:4%">
              <col style="width:4%">
            </colgroup>
            <thead>
              <tr>
                <th scope="col">번호</th>
                <th scope="col">제목</th>
                <th scope="col">글쓴이</th>
                <th scope="col">작성일</th>
                <th scope="col">댓글</th>
                <th scope="col">추천</th>
              </tr>
            </thead>
            <tbody class="listwrap2">
              {{if not .Posts}}
                <tr>
                  <td colspan="6" class="gall_tit">
                    <p class="empty">아직 작성된 글이 없습니다. 첫 글을 남겨보세요!</p>
                  </td>
                </tr>
              {{else}}
                {{range $i, $p := .Posts}}
                  <tr class="ub-content">
                    <td class="gall_num">{{$p.Number}}</td>
                    <td class="gall_tit ub-word">
                      <a href="/post/{{$p.ID}}">{{$p.Title}}</a>
                      {{if $p.Comments}}
                        <a class="reply_numbox" href="/post/{{$p.ID}}">
                          <span class="reply_num">[{{len $p.Comments}}]</span>
                        </a>
                      {{end}}
                    </td>
                    <td class="gall_writer ub-writer">
                      {{if $p.Author}}{{$p.Author}}{{else}}anon{{end}}
                    </td>
                    <td class="gall_date">
                      {{$p.CreatedAt.Format "01-02 15:04"}}
                    </td>
                    <td class="gall_reply">
                      <span class="reply-count">{{len $p.Comments}}</span>
                    </td>
                    <td class="gall_reply">
                      <span class="score">{{score $p.Upvotes $p.Downvotes}}</span>
                    </td>
                  </tr>
                {{end}}
              {{end}}
            </tbody>
          </table>
        </div>

        {{if .TotalPages}}
        <div class="bottom_paging_wrap">
          <div class="bottom_paging_box iconpaging">
            {{if gt .Page 1}}
              <a href="/?page={{dec .Page}}">이전</a>
            {{else}}
              <span>이전</span>
            {{end}}
            <span><em>{{.Page}}</em> / {{.TotalPages}}</span>
            {{if lt .Page .TotalPages}}
              <a href="/?page={{inc .Page}}">다음</a>
            {{else}}
              <span>다음</span>
            {{end}}
          </div>
          <div class="bottom_movebox">
            <button type="button" onclick="location.href='/?page=1'">처음으로</button>
          </div>
        </div>
        {{end}}
      </section>
    </main>
  </div>
</body>
</html>
